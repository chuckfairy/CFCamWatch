;(function() {"use strict";var CF=CF||{};CF.Watch={REVISION:1},CF.EventDispatcher=function(){},CF.EventDispatcher.prototype={constructor:EventDispatcher,apply:function(t){return t.on=CF.EventDispatcher.prototype.on,t.hasListener=CF.EventDispatcher.prototype.hasListener,t.removeListener=CF.EventDispatcher.prototype.removeListener,t.dispatch=CF.EventDispatcher.prototype.dispatch,t},on:function(t,n){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(n)&&i[t].push(n)},hasListener:function(t,n){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(n)?!0:!1},removeListener:function(t,n){if(void 0!==this._listeners){var i=this._listeners,e=i[t];if(void 0!==e){var o=e.indexOf(n);-1!==o&&e.splice(o,1)}}},dispatch:function(t){if(void 0!==this._listeners){var n=this._listeners,i=n[t.type];if(void 0!==i){t.target=this;for(var e=[],o=i.length,s=0;o>s;s++)e[s]=i[s];for(var s=0;o>s;s++)e[s].call(this,t)}}}},CF.Watch.App=function(t){var n=this;n.Connection=new CF.Watch.Connection,n.UI=new CF.Watch.UI,n.init()},CF.Watch.App.prototype={constructor:CF.Watch.App,Connection:null,UI:null,init:function(){var t=this;t.Connection.on("update",function(n){console.log("Cam update"),t.UI.update(n.base64)})}},CF.Watch.UI=function(){var t=this;t.imgArea=document.getElementById("img")},CF.Watch.UI.prototype={constructor:CF.Watch.UI,imgArea:null,update:function(t){var n=this,i=document.createElement("img");i.src=t,n.imgArea.innerHTML="",n.imgArea.appendChild(i)}},CF.Watch.Connection=function(t,n){var i=this;i.app=t,i.init()},CF.Watch.Connection.prototype={io:window.io,loggedIn:!1,opts:{},socket:null,init:function(){var t=this;t.socket=t.io(),t.socket.on("infO",t.setInfo.bind(t)),t.socket.on("login-success",t.setLogin.bind(t))},createDisplay:function(t){var n=this;return function(i){n.app.display(t,i)}},request:function(t,n){this.socket.emit(t,n)},on:function(t,n){this.socket.on(t,n)},setInfo:function(t){var n=this;t.logged&&n.setLogin(),n.dispatch({type:"get-info"})},setLogin:function(){var t=this;t.loggedIn=!0},login:function(t){var n=this;n.socket.emit("login",{pass:t})}};})();